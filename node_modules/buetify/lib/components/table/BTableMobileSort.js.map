{"version":3,"sources":["../../../src/components/table/BTableMobileSort.ts"],"names":[],"mappings":"AAEA,SAAS,YAAT,QAA6B,wBAA7B;AACA,OAAO,qBAAP,MAAkC,kDAAlC;AACA,SAAS,wBAAT,QAAyC,gCAAzC;AACA,SAAuB,cAAvB,QAAuD,UAAvD;AACA,SAAS,IAAT,QAAqB,iBAArB;AACA,SAAS,WAAT,QAA4B,kBAA5B;AACA,SAAS,IAAT,QAAqB,oBAArB;AACA,SAAgB,eAAhB,EAAiC,CAAjC,QAA0C,KAA1C;AAEA,MAAM,kBAAkB,GAAG,YAAY,CAAe,cAAf,CAAvC;;AAEA,SAAS,2BAAT,CAAqC,QAArC,EAAyD,cAAzD,EAAiF;AAC/E,SAAO,CAAC,CAAC,KAAD,EAAQ;AAAE,IAAA,KAAK,EAAE;AAAT,GAAR,EAA8B,CACpC,CAAC,CACC,QADD,EAEC;AACE,IAAA,KAAK,EAAE,mBADT;AAEE,IAAA,OAAO,EAAE;AAFX,GAFD,EAMC,CACE,CAAC,CAAC,qBAAD,EAAwB;AACvB,IAAA,UAAU,EAAE,QAAQ,KAAK,YADF;AAEvB,IAAA,IAAI,EAAE;AAFiB,GAAxB,CADH,CAND,CADmC,CAA9B,CAAR;AAeD;;AAED,SAAS,eAAT,CACE,WADF,EAEE,eAFF,EAGE,MAHF,EAIE,aAJF,EAIgD;AAE9C,SAAO,CAAC,CAAC,kBAAD,EAAqB;AAC3B,IAAA,WAD2B;AAE3B,IAAA,KAAK,EAAE,eAFoB;AAG3B,IAAA,OAAO,EAAE,OAHkB;AAI3B,IAAA,QAAQ,EAAE,OAJiB;AAK3B,IAAA,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,MAAD,CAAL,EAAe,WAAf,CALW;AAM3B,IAAA,UAAU,EAAE,IANe;AAO3B,2BAAuB;AAPI,GAArB,CAAR;AASD;;AAED,eAAe,eAAe,CAAC;AAC7B,EAAA,IAAI,EAAE,qBADuB;AAE7B,EAAA,KAAK,EAAE;AACL,IAAA,WAAW,EAAE;AACX,MAAA,IAAI,EAAE;AADK;AADR,GAFsB;;AAO7B,EAAA,KAAK,CAAC,KAAD,EAAM;AACT,UAAM,OAAO,GAAG,wBAAwB,EAAxC;;AAEA,aAAS,mBAAT,GAA4B;AAC1B,MAAA,OAAO,CAAC,mBAAR;AACD;;AAED,aAAS,gBAAT,CAA0B,MAA1B,EAA+C;AAC7C,UAAI,MAAJ,EAAY;AACV,QAAA,OAAO,CAAC,gBAAR,CAAyB,MAAM,CAAC,KAAhC;AACD;AACF;;AAED,WAAO,MAAK;AACV,aAAO,CAAC,CACN,SADM,EAEN;AACE,QAAA,KAAK,EAAE,yBADT;AAEE,sBAAc;AAFhB,OAFM,EAMN,CACE,CAAC,CAAC,KAAD,EAAQ;AAAE,QAAA,KAAK,EAAE;AAAT,OAAR,EAAuC,CACtC,eAAe,CAAC,KAAK,CAAC,WAAP,EAAoB,OAAO,CAAC,eAAR,CAAwB,KAA5C,EAAmD,OAAO,CAAC,MAAR,CAAe,KAAlE,EAAyE,gBAAzE,CADuB,EAEtC,2BAA2B,CAAC,OAAO,CAAC,QAAR,CAAiB,KAAlB,EAAyB,mBAAzB,CAFW,CAAvC,CADH,CANM,CAAR;AAaD,KAdD;AAeD;;AAnC4B,CAAD,CAA9B","sourcesContent":["import { IO } from 'fp-ts/IO';\nimport { FunctionN } from 'fp-ts/lib/function';\nimport { defineSelect } from '../form/select/BSelect';\nimport VerticalExpansionIcon from '../icons/verticalExpansion/VerticalExpansionIcon';\nimport { useInjectedSortableTable } from './composables/useSortableTable';\nimport { BTableColumn, eqBTableColumn, SortType } from './shared';\nimport { head } from 'fp-ts/lib/Array';\nimport { toUndefined } from 'fp-ts/lib/Option';\nimport { pipe } from 'fp-ts/lib/pipeable';\nimport { VNode, defineComponent, h } from 'vue';\n\nconst SelectBTableColumn = defineSelect<BTableColumn>(eqBTableColumn);\n\nfunction generateSortDirectionButton(sortType: SortType, toggleSortType: IO<void>): VNode {\n  return h('div', { class: 'control' }, [\n    h(\n      'button',\n      {\n        class: 'button is-primary',\n        onClick: toggleSortType\n      },\n      [\n        h(VerticalExpansionIcon, {\n          isExpanded: sortType === 'Descending',\n          size: 'is-small'\n        })\n      ]\n    )\n  ]);\n}\n\nfunction generateBSelect(\n  placeholder: string | undefined,\n  sortableColumns: BTableColumn[],\n  sortBy: BTableColumn[],\n  setSortColumn: FunctionN<[BTableColumn], void>\n): VNode {\n  return h(SelectBTableColumn, {\n    placeholder,\n    items: sortableColumns,\n    itemKey: 'label',\n    itemText: 'label',\n    modelValue: pipe(head(sortBy), toUndefined),\n    isExpanded: true,\n    'onUpdate:modelValue': setSortColumn\n  });\n}\n\nexport default defineComponent({\n  name: 'b-table-mobile-sort',\n  props: {\n    placeholder: {\n      type: String\n    }\n  },\n  setup(props) {\n    const sorting = useInjectedSortableTable();\n\n    function toggleSortDirection() {\n      sorting.updateSortDirection();\n    }\n\n    function updateSortColumn(column?: BTableColumn) {\n      if (column) {\n        sorting.updateSortColumn(column.label);\n      }\n    }\n\n    return () => {\n      return h(\n        'section',\n        {\n          class: 'field table-mobile-sort',\n          'aria-label': 'Table Sort Controls'\n        },\n        [\n          h('div', { class: 'field has-addons' }, [\n            generateBSelect(props.placeholder, sorting.sortableColumns.value, sorting.sortBy.value, updateSortColumn),\n            generateSortDirectionButton(sorting.sortType.value, toggleSortDirection)\n          ])\n        ]\n      );\n    };\n  }\n});\n"],"sourceRoot":"","file":"BTableMobileSort.js"}